<!doctype html><html lang=en-us><head><link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script><link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Not a myth: Using fields instead of methods in templates is good for the performance | Mythical Angular</title>
<link rel=canonical href=https://mythical-angular.dev/posts/functions/><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Not a myth: Using fields instead of methods in templates is good for the performance"><meta property="og:description" content="So, this article is a bit different. This time, I&rsquo;m describing a very popular technique of optimization in Angular that is actually not a myth.
The whole idea is to use fields instead of methods in templates, because to get value from a function you have to execute it. Using methods makes memoization not possible etc. In the end, do you really have to care about it?
The test To test this hypothesis, I&rsquo;ve created an example app."><meta property="og:type" content="article"><meta property="og:url" content="https://mythical-angular.dev/posts/functions/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-04T00:00:00+00:00"><meta property="article:modified_time" content="2022-07-04T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Not a myth: Using fields instead of methods in templates is good for the performance"><meta name=twitter:description content="So, this article is a bit different. This time, I&rsquo;m describing a very popular technique of optimization in Angular that is actually not a myth.
The whole idea is to use fields instead of methods in templates, because to get value from a function you have to execute it. Using methods makes memoization not possible etc. In the end, do you really have to care about it?
The test To test this hypothesis, I&rsquo;ve created an example app."><link rel=stylesheet href=https://mythical-angular.dev/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q=="><link rel=stylesheet href=https://mythical-angular.dev/css/custom.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://mythical-angular.dev/images/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-X7BCK4L1CF"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-X7BCK4L1CF",{anonymize_ip:!1})}</script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><header id=header><a href=https://mythical-angular.dev/><div id=logo style=background-image:url(https://mythical-angular.dev/logo.jpeg)></div><div id=title><h1>Mythical Angular</h1></div></a><div id=nav><ul><li class=icon><a href=# aria-label=Menu><i class="fas fa-bars fa-2x" aria-hidden=true></i></a></li><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/tags>Tags</a></li><li><a href=https://github.com/galczo5>GitHub</a></li></ul></div></header><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Not a myth: Using fields instead of methods in templates is good for the performance</h1><div class=meta><div class=postdate><time datetime="2022-07-04 00:00:00 +0000 UTC" itemprop=datePublished>2022-07-04</time></div></div></header><div class=content itemprop=articleBody><p>So, this article is a bit different.
This time, I&rsquo;m describing a very popular technique of optimization in Angular that is actually not a myth.</p><p>The whole idea is to use fields instead of methods in templates,
because to get value from a function you have to execute it.
Using methods makes memoization not possible etc.
In the end, do you really have to care about it?</p><h2 id=the-test>The test</h2><p>To test this hypothesis, I&rsquo;ve created an example app. It&rsquo;s very simple. Just three components.</p><p>Let&rsquo;s start with the starting conditions.
As always all of my components are using <code>OnPush</code> change detection strategy, <code>NoopNgZone</code> is provided.
I&rsquo;m doing it to minimize the influence of the framework.</p><p>So my app contains one component which can be used to check the performance when a component is using fields.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#ff79c6>import</span> {ChangeDetectionStrategy, Component} <span style=color:#ff79c6>from</span> <span style=color:#f1fa8c>&#39;@angular/core&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>@Component</span>({
</span></span><span style=display:flex><span>  selector<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;app-fields&#39;</span>,
</span></span><span style=display:flex><span>  template<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>`
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>    &lt;p&gt;
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>      {{ test }}
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>    &lt;/p&gt;
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>  `</span>,
</span></span><span style=display:flex><span>  changeDetection: <span style=color:#8be9fd>ChangeDetectionStrategy.OnPush</span>
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#ff79c6>export</span> <span style=color:#ff79c6>class</span> FieldsComponent {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  test: <span style=color:#8be9fd>string</span> <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;test&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>And almost the same component, but with method instead of field.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#ff79c6>import</span> {ChangeDetectionStrategy, Component} <span style=color:#ff79c6>from</span> <span style=color:#f1fa8c>&#39;@angular/core&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>@Component</span>({
</span></span><span style=display:flex><span>  selector<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;app-functions&#39;</span>,
</span></span><span style=display:flex><span>  template<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>`
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>    &lt;p&gt;
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>      {{ test() }}
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>    &lt;/p&gt;
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>  `</span>,
</span></span><span style=display:flex><span>  changeDetection: <span style=color:#8be9fd>ChangeDetectionStrategy.OnPush</span>
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#ff79c6>export</span> <span style=color:#ff79c6>class</span> FunctionsComponent {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  test()<span style=color:#ff79c6>:</span> <span style=color:#8be9fd>string</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>return</span> <span style=color:#f1fa8c>&#39;test&#39;</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>As you may expect, the difference in performance in these two components will be very, very small.
What we do to handle this&mldr;? Repetitions!</p><p>My tests will render multiple instances of each component, multiple times.
Executing a test like this will give us more comparable results.
Of course, to get the best results, we have to execute the whole test multiple times.</p><p>Here is my test component class.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">57
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#ff79c6>import</span> {ChangeDetectionStrategy, ChangeDetectorRef, Component} <span style=color:#ff79c6>from</span> <span style=color:#f1fa8c>&#39;@angular/core&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>@Component</span>({
</span></span><span style=display:flex><span>  selector<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;app-root&#39;</span>,
</span></span><span style=display:flex><span>  template<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>`
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>    &lt;div&gt;
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>      &lt;button (click)=&#34;selectTestType(&#39;fields&#39;)&#34;&gt;Use Fields&lt;/button&gt;
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>      &lt;button (click)=&#34;selectTestType(&#39;functions&#39;)&#34;&gt;Use Functions&lt;/button&gt;
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>      &lt;button (click)=&#34;test()&#34;&gt;Run test (selected {{ testType }})&lt;/button&gt;
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>      &lt;button (click)=&#34;reset()&#34;&gt;Reset&lt;/button&gt;
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>      &lt;span *ngIf=&#34;result&#34;&gt;Result {{ result }}&lt;/span&gt;
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>    &lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>    &lt;div *ngIf=&#34;testType === &#39;fields&#39; &amp;&amp; visible&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>        &lt;app-fields *ngFor=&#34;let x of TEST_ARRAY&#34;&gt;&lt;/app-fields&gt;
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>    &lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>    &lt;div *ngIf=&#34;testType === &#39;functions&#39; &amp;&amp; visible&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>      &lt;app-functions *ngFor=&#34;let x of TEST_ARRAY&#34;&gt;&lt;/app-functions&gt;
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>    &lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>  `</span>,
</span></span><span style=display:flex><span>  changeDetection: <span style=color:#8be9fd>ChangeDetectionStrategy.OnPush</span>
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#ff79c6>export</span> <span style=color:#ff79c6>class</span> AppComponent {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>readonly</span> TEST_ARRAY <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>new</span> <span style=color:#8be9fd;font-style:italic>Array</span>(<span style=color:#bd93f9>1000</span>).map((value, index) <span style=color:#ff79c6>=&gt;</span> index);
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>readonly</span> ITERATIONS <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>1000</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  result <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span>;
</span></span><span style=display:flex><span>  testType<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;fields&#39;</span> <span style=color:#ff79c6>|</span> <span style=color:#f1fa8c>&#39;functions&#39;</span> <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;functions&#39;</span>;
</span></span><span style=display:flex><span>  visible <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>false</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>constructor</span>(<span style=color:#ff79c6>private</span> <span style=color:#ff79c6>readonly</span> changeDetectorRef: <span style=color:#8be9fd>ChangeDetectorRef</span>) {
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  reset() {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>this</span>.result <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>this</span>.changeDetectorRef.detectChanges();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  selectTestType(<span style=color:#ff79c6>type</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;fields&#39;</span> <span style=color:#ff79c6>|</span> <span style=color:#f1fa8c>&#39;functions&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>this</span>.testType <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>type</span>;
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>this</span>.changeDetectorRef.detectChanges();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  test() {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>const</span> start <span style=color:#ff79c6>=</span> performance.now();
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>for</span> (<span style=color:#8be9fd;font-style:italic>let</span> i <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span>; i <span style=color:#ff79c6>&lt;</span> <span style=color:#ff79c6>this</span>.ITERATIONS; i<span style=color:#ff79c6>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>this</span>.visible <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>!</span><span style=color:#ff79c6>this</span>.visible;
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>this</span>.changeDetectorRef.detectChanges();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>const</span> end <span style=color:#ff79c6>=</span> performance.now();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>this</span>.result <span style=color:#ff79c6>=</span> end <span style=color:#ff79c6>-</span> start;
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>this</span>.changeDetectorRef.detectChanges();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>If you want to test it at home, follow <a href=https://github.com/galczo5/experiment-angular-functions-fields>this link to my GitHub repository with the code.</a></p><p>My test will render 1000 component instances 500 times (each iteration will create or destroy components).</p><h2 id=results>Results</h2><p>I repeated the test 15 times, before I was ready to agree that the results are trustful.
Everything you can find in the table below.</p><table><thead><tr><th>Test no.</th><th>Fields (ms)</th><th>Functions (ms)</th></tr></thead><tbody><tr><td>1</td><td>1708</td><td>2051</td></tr><tr><td>2</td><td>1717</td><td>1727</td></tr><tr><td>3</td><td>1692</td><td>1706</td></tr><tr><td>4</td><td>1749</td><td>1706</td></tr><tr><td>5</td><td>2054</td><td>1712</td></tr><tr><td>6</td><td>1854</td><td>1961</td></tr><tr><td>7</td><td>1692</td><td>1684</td></tr><tr><td>8</td><td>1673</td><td>1774</td></tr><tr><td>9</td><td>1703</td><td>1712</td></tr><tr><td>10</td><td>1684</td><td>1696</td></tr><tr><td>11</td><td>1700</td><td>1914</td></tr><tr><td>12</td><td>1732</td><td>1716</td></tr><tr><td>13</td><td>1939</td><td>1673</td></tr><tr><td>14</td><td>1694</td><td>1817</td></tr><tr><td>15</td><td>1703</td><td>1780</td></tr><tr><td><strong>AVG</strong></td><td>1752,93</td><td>1775,27</td></tr><tr><td><strong>MED</strong></td><td>1703</td><td>1716</td></tr><tr><td><strong>MIN</strong></td><td>1673</td><td>1673</td></tr><tr><td><strong>MAX</strong></td><td>2054</td><td>2051</td></tr></tbody></table><h2 id=summary>Summary</h2><p>In the end, using fields is slightly faster.
Remember that on average there&rsquo;s only 13ms of difference (rendering 1000 components 1000 times).</p><p>I&rsquo;m not sure if sacrificing code readability is worth refactor all of your templates.
After all, you have to introduce a few more fields in class if you want to avoid using functions,
and it may be harder to read and understand.</p><p>My example, of course, is pretty basic.
When you have long calculations, you should avoid using functions in templates.
Like in the real world.
There are no best practices you should always follow.
Everything has its context, and it&rsquo;s very important to know the facts before refactoring your code.</p></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/tags>Tags</a></li><li><a href=https://github.com/galczo5>GitHub</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#the-test>The test</a></li><li><a href=#results>Results</a></li><li><a href=#summary>Summary</a></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fmythical-angular.dev%2fposts%2ffunctions%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fmythical-angular.dev%2fposts%2ffunctions%2f&text=Not%20a%20myth%3a%20Using%20fields%20instead%20of%20methods%20in%20templates%20is%20good%20for%20the%20performance" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fmythical-angular.dev%2fposts%2ffunctions%2f&title=Not%20a%20myth%3a%20Using%20fields%20instead%20of%20methods%20in%20templates%20is%20good%20for%20the%20performance" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fmythical-angular.dev%2fposts%2ffunctions%2f&is_video=false&description=Not%20a%20myth%3a%20Using%20fields%20instead%20of%20methods%20in%20templates%20is%20good%20for%20the%20performance" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Not%20a%20myth%3a%20Using%20fields%20instead%20of%20methods%20in%20templates%20is%20good%20for%20the%20performance&body=Check out this article: https%3a%2f%2fmythical-angular.dev%2fposts%2ffunctions%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fmythical-angular.dev%2fposts%2ffunctions%2f&title=Not%20a%20myth%3a%20Using%20fields%20instead%20of%20methods%20in%20templates%20is%20good%20for%20the%20performance" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fmythical-angular.dev%2fposts%2ffunctions%2f&title=Not%20a%20myth%3a%20Using%20fields%20instead%20of%20methods%20in%20templates%20is%20good%20for%20the%20performance" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fmythical-angular.dev%2fposts%2ffunctions%2f&name=Not%20a%20myth%3a%20Using%20fields%20instead%20of%20methods%20in%20templates%20is%20good%20for%20the%20performance&description=So%2c%20this%20article%20is%20a%20bit%20different.%20This%20time%2c%20I%26rsquo%3bm%20describing%20a%20very%20popular%20technique%20of%20optimization%20in%20Angular%20that%20is%20actually%20not%20a%20myth.%0aThe%20whole%20idea%20is%20to%20use%20fields%20instead%20of%20methods%20in%20templates%2c%20because%20to%20get%20value%20from%20a%20function%20you%20have%20to%20execute%20it.%20Using%20methods%20makes%20memoization%20not%20possible%20etc.%20In%20the%20end%2c%20do%20you%20really%20have%20to%20care%20about%20it%3f%0aThe%20test%20To%20test%20this%20hypothesis%2c%20I%26rsquo%3bve%20created%20an%20example%20app." aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fmythical-angular.dev%2fposts%2ffunctions%2f&t=Not%20a%20myth%3a%20Using%20fields%20instead%20of%20methods%20in%20templates%20is%20good%20for%20the%20performance" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick='return $("#toc-footer").toggle(),!1' aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2024 Kamil Gałek</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/tags>Tags</a></li><li><a href=https://github.com/galczo5>GitHub</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script><script src=/js/main.js></script><script src=/js/code-copy.js></script></html>