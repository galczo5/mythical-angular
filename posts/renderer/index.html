<!doctype html><html lang=en-us><head><link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script>
<link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Myth: Styling method doesn't matter | Mythical Angular</title><link rel=canonical href=https://mythical-angular.dev/posts/renderer/><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Myth: Styling method doesn't matter"><meta property="og:description" content="Today I&rsquo;m going to show you how to test different methods of html styling in Angular. You&rsquo;re going to learn what is Renderer2, how and when to it and of course how it&rsquo;s implemented in the framework. I&rsquo;m going to compare different approaches of adding styles to find the best one. You&rsquo;ll see that it&rsquo;s not that simple.
Angular build-in directives At the very beginning, when you learn about Angular styling."><meta property="og:type" content="article"><meta property="og:url" content="https://mythical-angular.dev/posts/renderer/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-02-21T00:00:00+00:00"><meta property="article:modified_time" content="2022-02-21T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Myth: Styling method doesn't matter"><meta name=twitter:description content="Today I&rsquo;m going to show you how to test different methods of html styling in Angular. You&rsquo;re going to learn what is Renderer2, how and when to it and of course how it&rsquo;s implemented in the framework. I&rsquo;m going to compare different approaches of adding styles to find the best one. You&rsquo;ll see that it&rsquo;s not that simple.
Angular build-in directives At the very beginning, when you learn about Angular styling."><link rel=stylesheet href=https://mythical-angular.dev/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q=="><link rel=stylesheet href=https://mythical-angular.dev/css/custom.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://mythical-angular.dev/images/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-X7BCK4L1CF"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-X7BCK4L1CF",{anonymize_ip:!1})}</script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><header id=header><a href=https://mythical-angular.dev><div id=logo style=background-image:url(https://mythical-angular.dev/logo.jpeg)></div><div id=title><h1>Mythical Angular</h1></div></a><div id=nav><ul><li class=icon><a href=# aria-label=Menu><i class="fas fa-bars fa-2x" aria-hidden=true></i></a></li><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/tags>Tags</a></li><li><a href=https://github.com/galczo5>GitHub</a></li></ul></div></header><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Myth: Styling method doesn't matter</h1><div class=meta><div class=postdate><time datetime="2022-02-21 00:00:00 +0000 UTC" itemprop=datePublished>2022-02-21</time></div></div></header><div class=content itemprop=articleBody><p>Today I&rsquo;m going to show you how to test different methods of html styling in Angular.
You&rsquo;re going to learn what is <code>Renderer2</code>, how and when to it and of course how it&rsquo;s implemented in the framework. I&rsquo;m going to compare different approaches of adding styles to find the best one. You&rsquo;ll see that it&rsquo;s not that simple.</p><h2 id=angular-build-in-directives>Angular build-in directives</h2><p>At the very beginning, when you learn about Angular styling. It&rsquo;s very simple in the framework to add style or class dynamically to a html element.</p><p>For example. If I want to add background to my div, and value is not static, I can do it like in the code below.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#ff79c6>import</span> {ChangeDetectionStrategy, Component, Input} <span style=color:#ff79c6>from</span> <span style=color:#f1fa8c>&#39;@angular/core&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>@Component</span>({
</span></span><span style=display:flex><span>  selector<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;app-list-item-directive&#39;</span>,
</span></span><span style=display:flex><span>  template<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>`
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>    &lt;div [style.background]=&#34;color&#34;&gt;Lorem ipsum dolor sit amet enim.&lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>  `</span>,
</span></span><span style=display:flex><span>  changeDetection: <span style=color:#8be9fd>ChangeDetectionStrategy.OnPush</span>
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#ff79c6>export</span> <span style=color:#ff79c6>class</span> ListItemDirectiveComponent {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8be9fd;font-style:italic>@Input</span>()
</span></span><span style=display:flex><span>  color: <span style=color:#8be9fd>string</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>This way works with classes, attributes and so on. But how it is working under the hood&mldr;?
Let&rsquo;s start with analysis of <code>main.js</code> located in dist directory after the <code>ng build</code> has ended.
It looks very hard to understand, so I decided to make it easier.
Search for function <code>ListItemDirectiveComponent_Template</code>.
Basically, every template you define in Angular is transformed into a function in the javascript code.
Our background styles are added using something called <code>ɵɵstyleProp</code>;</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>ListItemDirectiveComponent.ɵcmp <span style=color:#ff79c6>=</span> <span style=color:#6272a4>/*@__PURE__*/</span> _angular_core__WEBPACK_IMPORTED_MODULE_0__[<span style=color:#f1fa8c>&#34;ɵɵdefineComponent&#34;</span>]({ type<span style=color:#ff79c6>:</span> ListItemDirectiveComponent, selectors<span style=color:#ff79c6>:</span> [[<span style=color:#f1fa8c>&#34;app-list-item-directive&#34;</span>]], inputs<span style=color:#ff79c6>:</span> { color<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;color&#34;</span> }, decls<span style=color:#ff79c6>:</span> <span style=color:#bd93f9>2</span>, vars<span style=color:#ff79c6>:</span> <span style=color:#bd93f9>2</span>, template<span style=color:#ff79c6>:</span> <span style=color:#8be9fd;font-style:italic>function</span> ListItemDirectiveComponent_Template(rf, ctx) { <span style=color:#ff79c6>if</span> (rf <span style=color:#ff79c6>&amp;</span> <span style=color:#bd93f9>1</span>) {
</span></span><span style=display:flex><span>        _angular_core__WEBPACK_IMPORTED_MODULE_0__[<span style=color:#f1fa8c>&#34;ɵɵelementStart&#34;</span>](<span style=color:#bd93f9>0</span>, <span style=color:#f1fa8c>&#34;div&#34;</span>);
</span></span><span style=display:flex><span>        _angular_core__WEBPACK_IMPORTED_MODULE_0__[<span style=color:#f1fa8c>&#34;ɵɵtext&#34;</span>](<span style=color:#bd93f9>1</span>, <span style=color:#f1fa8c>&#34;Lorem ipsum dolor sit amet enim.&#34;</span>);
</span></span><span style=display:flex><span>        _angular_core__WEBPACK_IMPORTED_MODULE_0__[<span style=color:#f1fa8c>&#34;ɵɵelementEnd&#34;</span>]();
</span></span><span style=display:flex><span>    } <span style=color:#ff79c6>if</span> (rf <span style=color:#ff79c6>&amp;</span> <span style=color:#bd93f9>2</span>) {
</span></span><span style=display:flex><span>        _angular_core__WEBPACK_IMPORTED_MODULE_0__[<span style=color:#f1fa8c>&#34;ɵɵstyleProp&#34;</span>](<span style=color:#f1fa8c>&#34;background&#34;</span>, ctx.color);
</span></span><span style=display:flex><span>    } }, encapsulation<span style=color:#ff79c6>:</span> <span style=color:#bd93f9>2</span>, changeDetection<span style=color:#ff79c6>:</span> <span style=color:#bd93f9>0</span> });
</span></span></code></pre></td></tr></table></div></div><p>To check it further, you have a few options.
You can try to mess with the Angular sources and follow the usages of <code>ɵɵstyleProp</code>.
Second one, that I used in this case is to put <code>debugger</code> and above line contains <code>_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("background", ctx.color);</code>.
After few round of step over and step into actions in the dev tools I found <code>applyStyling</code> function.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">52
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">53
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">54
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">55
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">56
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">57
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">58
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">59
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">60
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">61
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#6272a4>/**
</span></span></span><span style=display:flex><span><span style=color:#6272a4> * Writes class/style to element.
</span></span></span><span style=display:flex><span><span style=color:#6272a4> *
</span></span></span><span style=display:flex><span><span style=color:#6272a4> * @param renderer Renderer to use.
</span></span></span><span style=display:flex><span><span style=color:#6272a4> * @param isClassBased `true` if it should be written to `class` (`false` to write to `style`)
</span></span></span><span style=display:flex><span><span style=color:#6272a4> * @param rNode The Node to write to.
</span></span></span><span style=display:flex><span><span style=color:#6272a4> * @param prop Property to write to. This would be the class/style name.
</span></span></span><span style=display:flex><span><span style=color:#6272a4> * @param value Value to write. If `null`/`undefined`/`false` this is considered a remove (set/add
</span></span></span><span style=display:flex><span><span style=color:#6272a4> *        otherwise).
</span></span></span><span style=display:flex><span><span style=color:#6272a4> */</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>export</span> <span style=color:#8be9fd;font-style:italic>function</span> applyStyling(
</span></span><span style=display:flex><span>    renderer: <span style=color:#8be9fd>Renderer3</span>, isClassBased: <span style=color:#8be9fd>boolean</span>, rNode: <span style=color:#8be9fd>RElement</span>, prop: <span style=color:#8be9fd>string</span>, value: <span style=color:#8be9fd>any</span>) {
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>const</span> isProcedural <span style=color:#ff79c6>=</span> isProceduralRenderer(renderer);
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>if</span> (isClassBased) {
</span></span><span style=display:flex><span>    <span style=color:#6272a4>// We actually want JS true/false here because any truthy value should add the class
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>    <span style=color:#ff79c6>if</span> (<span style=color:#ff79c6>!</span>value) {
</span></span><span style=display:flex><span>      ngDevMode <span style=color:#ff79c6>&amp;&amp;</span> ngDevMode.rendererRemoveClass<span style=color:#ff79c6>++</span>;
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>if</span> (isProcedural) {
</span></span><span style=display:flex><span>        (renderer <span style=color:#ff79c6>as</span> Renderer2).removeClass(rNode, prop);
</span></span><span style=display:flex><span>      } <span style=color:#ff79c6>else</span> {
</span></span><span style=display:flex><span>        (rNode <span style=color:#ff79c6>as</span> HTMLElement).classList.remove(prop);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    } <span style=color:#ff79c6>else</span> {
</span></span><span style=display:flex><span>      ngDevMode <span style=color:#ff79c6>&amp;&amp;</span> ngDevMode.rendererAddClass<span style=color:#ff79c6>++</span>;
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>if</span> (isProcedural) {
</span></span><span style=display:flex><span>        (renderer <span style=color:#ff79c6>as</span> Renderer2).addClass(rNode, prop);
</span></span><span style=display:flex><span>      } <span style=color:#ff79c6>else</span> {
</span></span><span style=display:flex><span>        ngDevMode <span style=color:#ff79c6>&amp;&amp;</span> assertDefined((rNode <span style=color:#ff79c6>as</span> HTMLElement).classList, <span style=color:#f1fa8c>&#39;HTMLElement expected&#39;</span>);
</span></span><span style=display:flex><span>        (rNode <span style=color:#ff79c6>as</span> HTMLElement).classList.add(prop);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  } <span style=color:#ff79c6>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#8be9fd;font-style:italic>let</span> flags <span style=color:#ff79c6>=</span> prop.indexOf(<span style=color:#f1fa8c>&#39;-&#39;</span>) <span style=color:#ff79c6>===</span> <span style=color:#ff79c6>-</span><span style=color:#bd93f9>1</span> <span style=color:#ff79c6>?</span> <span style=color:#ff79c6>undefined</span> <span style=color:#ff79c6>:</span> RendererStyleFlags2.DashCase <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>number</span>;
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>if</span> (value <span style=color:#ff79c6>==</span> <span style=color:#ff79c6>null</span> <span style=color:#6272a4>/** || value === undefined */</span>) {
</span></span><span style=display:flex><span>      ngDevMode <span style=color:#ff79c6>&amp;&amp;</span> ngDevMode.rendererRemoveStyle<span style=color:#ff79c6>++</span>;
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>if</span> (isProcedural) {
</span></span><span style=display:flex><span>        (renderer <span style=color:#ff79c6>as</span> Renderer2).removeStyle(rNode, prop, flags);
</span></span><span style=display:flex><span>      } <span style=color:#ff79c6>else</span> {
</span></span><span style=display:flex><span>        (rNode <span style=color:#ff79c6>as</span> HTMLElement).style.removeProperty(prop);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    } <span style=color:#ff79c6>else</span> {
</span></span><span style=display:flex><span>      <span style=color:#6272a4>// A value is important if it ends with `!important`. The style
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>      <span style=color:#6272a4>// parser strips any semicolons at the end of the value.
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>      <span style=color:#ff79c6>const</span> isImportant <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>typeof</span> value <span style=color:#ff79c6>===</span> <span style=color:#f1fa8c>&#39;string&#39;</span> <span style=color:#ff79c6>?</span> value.endsWith(<span style=color:#f1fa8c>&#39;!important&#39;</span>) <span style=color:#ff79c6>:</span> <span style=color:#ff79c6>false</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>if</span> (isImportant) {
</span></span><span style=display:flex><span>        <span style=color:#6272a4>// !important has to be stripped from the value for it to be valid.
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>        value <span style=color:#ff79c6>=</span> value.slice(<span style=color:#bd93f9>0</span>, <span style=color:#ff79c6>-</span><span style=color:#bd93f9>10</span>);
</span></span><span style=display:flex><span>        flags<span style=color:#ff79c6>!</span> <span style=color:#ff79c6>|=</span> RendererStyleFlags2.Important;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      ngDevMode <span style=color:#ff79c6>&amp;&amp;</span> ngDevMode.rendererSetStyle<span style=color:#ff79c6>++</span>;
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>if</span> (isProcedural) {
</span></span><span style=display:flex><span>        (renderer <span style=color:#ff79c6>as</span> Renderer2).setStyle(rNode, prop, value, flags);
</span></span><span style=display:flex><span>      } <span style=color:#ff79c6>else</span> {
</span></span><span style=display:flex><span>        ngDevMode <span style=color:#ff79c6>&amp;&amp;</span> assertDefined((rNode <span style=color:#ff79c6>as</span> HTMLElement).style, <span style=color:#f1fa8c>&#39;HTMLElement expected&#39;</span>);
</span></span><span style=display:flex><span>        (rNode <span style=color:#ff79c6>as</span> HTMLElement).style.setProperty(prop, value, isImportant <span style=color:#ff79c6>?</span> <span style=color:#f1fa8c>&#39;important&#39;</span> <span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;&#39;</span>);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Looks like <code>isProcedural</code> is the key here.
If it&rsquo;s true, <code>Renderer2.setStyle</code> method is used, if not style is set on the reference to the element.</p><p>Checking if the renderer is procedural is quite simple.
It&rsquo;s procedural if there is a <code>listen</code> method.
In our case, renderer is procedural.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#6272a4>/** Returns whether the `renderer` is a `ProceduralRenderer3` */</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>export</span> <span style=color:#8be9fd;font-style:italic>function</span> isProceduralRenderer(renderer: <span style=color:#8be9fd>ProceduralRenderer3</span><span style=color:#ff79c6>|</span>
</span></span><span style=display:flex><span>                                     ObjectOrientedRenderer3)<span style=color:#ff79c6>:</span> renderer <span style=color:#ff79c6>is</span> ProceduralRenderer3 {
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>return</span> <span style=color:#ff79c6>!!</span>((renderer <span style=color:#ff79c6>as</span> <span style=color:#8be9fd>any</span>).listen);
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>So at the end,
Angular is using <code>Renderer2.setStyle</code> method to set style when we are using build in directives and properties.</p><h2 id=renderer2>Renderer2</h2><p>Second way of adding styles to the element is using <code>Renderer2</code> directly on the html elements.
This object can be injected into a Component or Directive class. You can use it like in the code example below.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#ff79c6>import</span> {
</span></span><span style=display:flex><span>  ChangeDetectionStrategy,
</span></span><span style=display:flex><span>  Component,
</span></span><span style=display:flex><span>  ElementRef,
</span></span><span style=display:flex><span>  Input,
</span></span><span style=display:flex><span>  OnDestroy,
</span></span><span style=display:flex><span>  OnInit,
</span></span><span style=display:flex><span>  Renderer2,
</span></span><span style=display:flex><span>  ViewChild
</span></span><span style=display:flex><span>} <span style=color:#ff79c6>from</span> <span style=color:#f1fa8c>&#39;@angular/core&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#ff79c6>import</span> {BackgroundService} <span style=color:#ff79c6>from</span> <span style=color:#f1fa8c>&#39;../background.service&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#ff79c6>import</span> {Subject} <span style=color:#ff79c6>from</span> <span style=color:#f1fa8c>&#34;rxjs&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#ff79c6>import</span> {takeUntil} <span style=color:#ff79c6>from</span> <span style=color:#f1fa8c>&#34;rxjs/operators&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>@Component</span>({
</span></span><span style=display:flex><span>  selector<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;app-list-item-renderer&#39;</span>,
</span></span><span style=display:flex><span>  template<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>`
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>    &lt;div #item&gt;Lorem ipsum dolor sit amet enim.&lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>  `</span>,
</span></span><span style=display:flex><span>  changeDetection: <span style=color:#8be9fd>ChangeDetectionStrategy.OnPush</span>
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#ff79c6>export</span> <span style=color:#ff79c6>class</span> ListItemRendererComponent <span style=color:#ff79c6>implements</span> OnInit, OnDestroy {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8be9fd;font-style:italic>@ViewChild</span>(<span style=color:#f1fa8c>&#39;item&#39;</span>, { <span style=color:#ff79c6>static</span><span style=color:#ff79c6>:</span> <span style=color:#ff79c6>true</span>, read: <span style=color:#8be9fd>ElementRef</span> })
</span></span><span style=display:flex><span>  item: <span style=color:#8be9fd>ElementRef</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8be9fd;font-style:italic>@Input</span>()
</span></span><span style=display:flex><span>  id: <span style=color:#8be9fd>number</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>private</span> <span style=color:#ff79c6>readonly</span> onDestroy$: <span style=color:#8be9fd>Subject</span>&lt;<span style=color:#ff79c6>void</span>&gt; <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>new</span> Subject&lt;<span style=color:#ff79c6>void</span>&gt;();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>constructor</span>(<span style=color:#ff79c6>private</span> backgroundService: <span style=color:#8be9fd>BackgroundService</span>,
</span></span><span style=display:flex><span>              <span style=color:#ff79c6>private</span> renderer: <span style=color:#8be9fd>Renderer2</span>) {
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  ngOnInit()<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>this</span>.backgroundService.<span style=color:#ff79c6>get</span>(<span style=color:#ff79c6>this</span>.id)
</span></span><span style=display:flex><span>      .pipe(takeUntil(<span style=color:#ff79c6>this</span>.onDestroy$))
</span></span><span style=display:flex><span>      .subscribe(color <span style=color:#ff79c6>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>this</span>.renderer.setStyle(<span style=color:#ff79c6>this</span>.item.nativeElement, <span style=color:#f1fa8c>&#39;background&#39;</span>, color);
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  ngOnDestroy() {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>this</span>.onDestroy$.next();
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>this</span>.onDestroy$.complete();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>In fact <code>Renderer2</code> class is an abstract class implemented by few other classes.
<strong>I decided to remove description comments from the code, because it was so long. If you want to check the whole class, you can do it here: <a href=https://github.com/angular/angular/blob/8c71b9fc42e1aa898200b2b3ebb54d6faf0fa645/packages/core/src/render/api.ts#L66>packages/core/src/render/api.ts</a>.</strong></p><p><strong>Please, notice that it&rsquo;s a link to GitHub sources, so it may be changed by the time.</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#ff79c6>export</span> <span style=color:#ff79c6>abstract</span> <span style=color:#ff79c6>class</span> Renderer2 {
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>abstract</span> <span style=color:#ff79c6>get</span> data()<span style=color:#ff79c6>:</span> {[key: <span style=color:#8be9fd>string</span>]<span style=color:#ff79c6>:</span> <span style=color:#8be9fd>any</span>};
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>abstract</span> destroy()<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>abstract</span> createElement(name: <span style=color:#8be9fd>string</span>, <span style=color:#ff79c6>namespace</span><span style=color:#ff79c6>?:</span> <span style=color:#8be9fd>string</span><span style=color:#ff79c6>|</span><span style=color:#ff79c6>null</span>)<span style=color:#ff79c6>:</span> <span style=color:#8be9fd>any</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>abstract</span> createComment(value: <span style=color:#8be9fd>string</span>)<span style=color:#ff79c6>:</span> <span style=color:#8be9fd>any</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>abstract</span> createText(value: <span style=color:#8be9fd>string</span>)<span style=color:#ff79c6>:</span> <span style=color:#8be9fd>any</span>;
</span></span><span style=display:flex><span>  destroyNode<span style=color:#ff79c6>!:</span> ((node: <span style=color:#8be9fd>any</span>) <span style=color:#ff79c6>=&gt;</span> <span style=color:#ff79c6>void</span>)<span style=color:#ff79c6>|</span><span style=color:#ff79c6>null</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>abstract</span> appendChild(parent: <span style=color:#8be9fd>any</span>, newChild: <span style=color:#8be9fd>any</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>abstract</span> insertBefore(parent: <span style=color:#8be9fd>any</span>, newChild: <span style=color:#8be9fd>any</span>, refChild: <span style=color:#8be9fd>any</span>, isMove?: <span style=color:#8be9fd>boolean</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>abstract</span> removeChild(parent: <span style=color:#8be9fd>any</span>, oldChild: <span style=color:#8be9fd>any</span>, isHostElement?: <span style=color:#8be9fd>boolean</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>abstract</span> selectRootElement(selectorOrNode: <span style=color:#8be9fd>string</span><span style=color:#ff79c6>|</span><span style=color:#8be9fd>any</span>, preserveContent?: <span style=color:#8be9fd>boolean</span>)<span style=color:#ff79c6>:</span> <span style=color:#8be9fd>any</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>abstract</span> parentNode(node: <span style=color:#8be9fd>any</span>)<span style=color:#ff79c6>:</span> <span style=color:#8be9fd>any</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>abstract</span> nextSibling(node: <span style=color:#8be9fd>any</span>)<span style=color:#ff79c6>:</span> <span style=color:#8be9fd>any</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>abstract</span> setAttribute(el: <span style=color:#8be9fd>any</span>, name: <span style=color:#8be9fd>string</span>, value: <span style=color:#8be9fd>string</span>, <span style=color:#ff79c6>namespace</span><span style=color:#ff79c6>?:</span> <span style=color:#8be9fd>string</span><span style=color:#ff79c6>|</span><span style=color:#ff79c6>null</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>abstract</span> removeAttribute(el: <span style=color:#8be9fd>any</span>, name: <span style=color:#8be9fd>string</span>, <span style=color:#ff79c6>namespace</span><span style=color:#ff79c6>?:</span> <span style=color:#8be9fd>string</span><span style=color:#ff79c6>|</span><span style=color:#ff79c6>null</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>abstract</span> addClass(el: <span style=color:#8be9fd>any</span>, name: <span style=color:#8be9fd>string</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>abstract</span> removeClass(el: <span style=color:#8be9fd>any</span>, name: <span style=color:#8be9fd>string</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>abstract</span> setStyle(el: <span style=color:#8be9fd>any</span>, style: <span style=color:#8be9fd>string</span>, value: <span style=color:#8be9fd>any</span>, flags?: <span style=color:#8be9fd>RendererStyleFlags2</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>abstract</span> removeStyle(el: <span style=color:#8be9fd>any</span>, style: <span style=color:#8be9fd>string</span>, flags?: <span style=color:#8be9fd>RendererStyleFlags2</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>abstract</span> setProperty(el: <span style=color:#8be9fd>any</span>, name: <span style=color:#8be9fd>string</span>, value: <span style=color:#8be9fd>any</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>abstract</span> setValue(node: <span style=color:#8be9fd>any</span>, value: <span style=color:#8be9fd>string</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>abstract</span> listen(
</span></span><span style=display:flex><span>      target<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;window&#39;</span><span style=color:#ff79c6>|</span><span style=color:#f1fa8c>&#39;document&#39;</span><span style=color:#ff79c6>|</span><span style=color:#f1fa8c>&#39;body&#39;</span><span style=color:#ff79c6>|</span><span style=color:#8be9fd>any</span>, eventName: <span style=color:#8be9fd>string</span>,
</span></span><span style=display:flex><span>      callback<span style=color:#ff79c6>:</span> (event: <span style=color:#8be9fd>any</span>) <span style=color:#ff79c6>=&gt;</span> <span style=color:#ff79c6>boolean</span> <span style=color:#ff79c6>|</span> <span style=color:#ff79c6>void</span>)<span style=color:#ff79c6>:</span> () <span style=color:#ff79c6>=&gt;</span> <span style=color:#ff79c6>void</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>static</span> __NG_ELEMENT_ID__<span style=color:#ff79c6>:</span> () <span style=color:#ff79c6>=&gt;</span> Renderer2 <span style=color:#ff79c6>=</span> () <span style=color:#ff79c6>=&gt;</span> injectRenderer2();
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>And here you have a list of implementations that I found in the sources.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>AnimationRenderer
</span></span><span style=display:flex><span>BaseAnimationRenderer
</span></span><span style=display:flex><span>DefaultDomRenderer2
</span></span><span style=display:flex><span>DefaultServerRenderer2
</span></span><span style=display:flex><span>EmulatedEncapsulationDomRenderer2
</span></span><span style=display:flex><span>EmulatedEncapsulationServerRenderer2
</span></span><span style=display:flex><span>ShadowDomRenderer
</span></span></code></pre></td></tr></table></div></div><p>I encourage you to check how every one of these works, but in my case <code>DefaultDomRenderer2</code> was used, I&rsquo;m going to focus on that one.</p><p>Implementation is quite easy, and I decided to place it in the code snippet below.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 41
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 42
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 43
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 44
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 45
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 46
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 47
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 48
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 49
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 50
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 51
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 52
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 53
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 54
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 55
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 56
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 57
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 58
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 59
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 60
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 61
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 62
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 63
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 64
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 65
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 66
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 67
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 68
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 69
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 70
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 71
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 72
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 73
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 74
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 75
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 76
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 77
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 78
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 79
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 80
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 81
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 82
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 83
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 84
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 85
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 86
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 87
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 88
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 89
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 90
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 91
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 92
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 93
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 94
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 95
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 96
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 97
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 98
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 99
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">100
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">101
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">102
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">103
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">104
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">105
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">106
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">107
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">108
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">109
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">110
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">111
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">112
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">113
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">114
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">115
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">116
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">117
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">118
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">119
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">120
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">121
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">122
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">123
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">124
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">125
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">126
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">127
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">128
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">129
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">130
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">131
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">132
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">133
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">134
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">135
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">136
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">137
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">138
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">139
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">140
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">141
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">142
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">143
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#ff79c6>class</span> DefaultDomRenderer2 <span style=color:#ff79c6>implements</span> Renderer2 {
</span></span><span style=display:flex><span>  data<span style=color:#ff79c6>:</span> {[key: <span style=color:#8be9fd>string</span>]<span style=color:#ff79c6>:</span> <span style=color:#8be9fd>any</span>} <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>Object</span>.create(<span style=color:#ff79c6>null</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>constructor</span>(<span style=color:#ff79c6>private</span> eventManager: <span style=color:#8be9fd>EventManager</span>) {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  destroy()<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span> {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  destroyNode <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>null</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  createElement(name: <span style=color:#8be9fd>string</span>, <span style=color:#ff79c6>namespace</span><span style=color:#ff79c6>?:</span> <span style=color:#8be9fd>string</span>)<span style=color:#ff79c6>:</span> <span style=color:#8be9fd>any</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>if</span> (<span style=color:#ff79c6>namespace</span>) {
</span></span><span style=display:flex><span>      <span style=color:#6272a4>// TODO: `|| namespace` was added in
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>      <span style=color:#6272a4>// https://github.com/angular/angular/commit/2b9cc8503d48173492c29f5a271b61126104fbdb to
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>      <span style=color:#6272a4>// support how Ivy passed around the namespace URI rather than short name at the time. It did
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>      <span style=color:#6272a4>// not, however extend the support to other parts of the system (setAttribute, setAttribute,
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>      <span style=color:#6272a4>// and the ServerRenderer). We should decide what exactly the semantics for dealing with
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>      <span style=color:#6272a4>// namespaces should be and make it consistent.
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>      <span style=color:#6272a4>// Related issues:
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>      <span style=color:#6272a4>// https://github.com/angular/angular/issues/44028
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>      <span style=color:#6272a4>// https://github.com/angular/angular/issues/44883
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>      <span style=color:#ff79c6>return</span> <span style=color:#8be9fd;font-style:italic>document</span>.createElementNS(NAMESPACE_URIS[<span style=color:#ff79c6>namespace</span>] <span style=color:#ff79c6>||</span> <span style=color:#ff79c6>namespace</span>, name);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>return</span> <span style=color:#8be9fd;font-style:italic>document</span>.createElement(name);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  createComment(value: <span style=color:#8be9fd>string</span>)<span style=color:#ff79c6>:</span> <span style=color:#8be9fd>any</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>return</span> <span style=color:#8be9fd;font-style:italic>document</span>.createComment(value);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  createText(value: <span style=color:#8be9fd>string</span>)<span style=color:#ff79c6>:</span> <span style=color:#8be9fd>any</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>return</span> <span style=color:#8be9fd;font-style:italic>document</span>.createTextNode(value);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  appendChild(parent: <span style=color:#8be9fd>any</span>, newChild: <span style=color:#8be9fd>any</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span> {
</span></span><span style=display:flex><span>    parent.appendChild(newChild);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  insertBefore(parent: <span style=color:#8be9fd>any</span>, newChild: <span style=color:#8be9fd>any</span>, refChild: <span style=color:#8be9fd>any</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>if</span> (parent) {
</span></span><span style=display:flex><span>      parent.insertBefore(newChild, refChild);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  removeChild(parent: <span style=color:#8be9fd>any</span>, oldChild: <span style=color:#8be9fd>any</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>if</span> (parent) {
</span></span><span style=display:flex><span>      parent.removeChild(oldChild);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  selectRootElement(selectorOrNode: <span style=color:#8be9fd>string</span><span style=color:#ff79c6>|</span><span style=color:#8be9fd>any</span>, preserveContent?: <span style=color:#8be9fd>boolean</span>)<span style=color:#ff79c6>:</span> <span style=color:#8be9fd>any</span> {
</span></span><span style=display:flex><span>    <span style=color:#8be9fd;font-style:italic>let</span> el: <span style=color:#8be9fd>any</span> <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>typeof</span> selectorOrNode <span style=color:#ff79c6>===</span> <span style=color:#f1fa8c>&#39;string&#39;</span> <span style=color:#ff79c6>?</span> <span style=color:#8be9fd;font-style:italic>document</span>.querySelector(selectorOrNode) <span style=color:#ff79c6>:</span>
</span></span><span style=display:flex><span>                                                       selectorOrNode;
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>if</span> (<span style=color:#ff79c6>!</span>el) {
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>throw</span> <span style=color:#ff79c6>new</span> <span style=color:#8be9fd;font-style:italic>Error</span>(<span style=color:#f1fa8c>`The selector &#34;</span><span style=color:#f1fa8c>${</span>selectorOrNode<span style=color:#f1fa8c>}</span><span style=color:#f1fa8c>&#34; did not match any elements`</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>if</span> (<span style=color:#ff79c6>!</span>preserveContent) {
</span></span><span style=display:flex><span>      el.textContent <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;&#39;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>return</span> el;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  parentNode(node: <span style=color:#8be9fd>any</span>)<span style=color:#ff79c6>:</span> <span style=color:#8be9fd>any</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>return</span> node.parentNode;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  nextSibling(node: <span style=color:#8be9fd>any</span>)<span style=color:#ff79c6>:</span> <span style=color:#8be9fd>any</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>return</span> node.nextSibling;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  setAttribute(el: <span style=color:#8be9fd>any</span>, name: <span style=color:#8be9fd>string</span>, value: <span style=color:#8be9fd>string</span>, <span style=color:#ff79c6>namespace</span><span style=color:#ff79c6>?:</span> <span style=color:#8be9fd>string</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>if</span> (<span style=color:#ff79c6>namespace</span>) {
</span></span><span style=display:flex><span>      name <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>namespace</span> <span style=color:#ff79c6>+</span> <span style=color:#f1fa8c>&#39;:&#39;</span> <span style=color:#ff79c6>+</span> name;
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>const</span> namespaceUri <span style=color:#ff79c6>=</span> NAMESPACE_URIS[<span style=color:#ff79c6>namespace</span>];
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>if</span> (namespaceUri) {
</span></span><span style=display:flex><span>        el.setAttributeNS(namespaceUri, name, value);
</span></span><span style=display:flex><span>      } <span style=color:#ff79c6>else</span> {
</span></span><span style=display:flex><span>        el.setAttribute(name, value);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    } <span style=color:#ff79c6>else</span> {
</span></span><span style=display:flex><span>      el.setAttribute(name, value);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  removeAttribute(el: <span style=color:#8be9fd>any</span>, name: <span style=color:#8be9fd>string</span>, <span style=color:#ff79c6>namespace</span><span style=color:#ff79c6>?:</span> <span style=color:#8be9fd>string</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>if</span> (<span style=color:#ff79c6>namespace</span>) {
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>const</span> namespaceUri <span style=color:#ff79c6>=</span> NAMESPACE_URIS[<span style=color:#ff79c6>namespace</span>];
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>if</span> (namespaceUri) {
</span></span><span style=display:flex><span>        el.removeAttributeNS(namespaceUri, name);
</span></span><span style=display:flex><span>      } <span style=color:#ff79c6>else</span> {
</span></span><span style=display:flex><span>        el.removeAttribute(<span style=color:#f1fa8c>`</span><span style=color:#f1fa8c>${</span><span style=color:#ff79c6>namespace</span><span style=color:#f1fa8c>}</span><span style=color:#f1fa8c>:</span><span style=color:#f1fa8c>${</span>name<span style=color:#f1fa8c>}</span><span style=color:#f1fa8c>`</span>);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    } <span style=color:#ff79c6>else</span> {
</span></span><span style=display:flex><span>      el.removeAttribute(name);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  addClass(el: <span style=color:#8be9fd>any</span>, name: <span style=color:#8be9fd>string</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span> {
</span></span><span style=display:flex><span>    el.classList.add(name);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  removeClass(el: <span style=color:#8be9fd>any</span>, name: <span style=color:#8be9fd>string</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span> {
</span></span><span style=display:flex><span>    el.classList.remove(name);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  setStyle(el: <span style=color:#8be9fd>any</span>, style: <span style=color:#8be9fd>string</span>, value: <span style=color:#8be9fd>any</span>, flags: <span style=color:#8be9fd>RendererStyleFlags2</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>if</span> (flags <span style=color:#ff79c6>&amp;</span> (RendererStyleFlags2.DashCase <span style=color:#ff79c6>|</span> RendererStyleFlags2.Important)) {
</span></span><span style=display:flex><span>      el.style.setProperty(style, value, flags <span style=color:#ff79c6>&amp;</span> RendererStyleFlags2.Important <span style=color:#ff79c6>?</span> <span style=color:#f1fa8c>&#39;important&#39;</span> <span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;&#39;</span>);
</span></span><span style=display:flex><span>    } <span style=color:#ff79c6>else</span> {
</span></span><span style=display:flex><span>      el.style[style] <span style=color:#ff79c6>=</span> value;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  removeStyle(el: <span style=color:#8be9fd>any</span>, style: <span style=color:#8be9fd>string</span>, flags: <span style=color:#8be9fd>RendererStyleFlags2</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>if</span> (flags <span style=color:#ff79c6>&amp;</span> RendererStyleFlags2.DashCase) {
</span></span><span style=display:flex><span>      el.style.removeProperty(style);
</span></span><span style=display:flex><span>    } <span style=color:#ff79c6>else</span> {
</span></span><span style=display:flex><span>      <span style=color:#6272a4>// IE requires &#39;&#39; instead of null
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>      <span style=color:#6272a4>// see https://github.com/angular/angular/issues/7916
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>      el.style[style] <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;&#39;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  setProperty(el: <span style=color:#8be9fd>any</span>, name: <span style=color:#8be9fd>string</span>, value: <span style=color:#8be9fd>any</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span> {
</span></span><span style=display:flex><span>    NG_DEV_MODE <span style=color:#ff79c6>&amp;&amp;</span> checkNoSyntheticProp(name, <span style=color:#f1fa8c>&#39;property&#39;</span>);
</span></span><span style=display:flex><span>    el[name] <span style=color:#ff79c6>=</span> value;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  setValue(node: <span style=color:#8be9fd>any</span>, value: <span style=color:#8be9fd>string</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span> {
</span></span><span style=display:flex><span>    node.nodeValue <span style=color:#ff79c6>=</span> value;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  listen(target<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;window&#39;</span><span style=color:#ff79c6>|</span><span style=color:#f1fa8c>&#39;document&#39;</span><span style=color:#ff79c6>|</span><span style=color:#f1fa8c>&#39;body&#39;</span><span style=color:#ff79c6>|</span><span style=color:#8be9fd>any</span>, event: <span style=color:#8be9fd>string</span>, callback<span style=color:#ff79c6>:</span> (event: <span style=color:#8be9fd>any</span>) <span style=color:#ff79c6>=&gt;</span> <span style=color:#ff79c6>boolean</span>)<span style=color:#ff79c6>:</span>
</span></span><span style=display:flex><span>      () <span style=color:#ff79c6>=&gt;</span> <span style=color:#ff79c6>void</span> {
</span></span><span style=display:flex><span>    NG_DEV_MODE <span style=color:#ff79c6>&amp;&amp;</span> checkNoSyntheticProp(event, <span style=color:#f1fa8c>&#39;listener&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>if</span> (<span style=color:#ff79c6>typeof</span> target <span style=color:#ff79c6>===</span> <span style=color:#f1fa8c>&#39;string&#39;</span>) {
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>return</span> <span style=color:#ff79c6>&lt;</span>() <span style=color:#ff79c6>=&gt;</span> <span style=color:#ff79c6>void</span><span style=color:#ff79c6>&gt;</span><span style=color:#ff79c6>this</span>.eventManager.addGlobalEventListener(
</span></span><span style=display:flex><span>          target, event, decoratePreventDefault(callback));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>return</span> <span style=color:#ff79c6>&lt;</span>() <span style=color:#ff79c6>=&gt;</span> <span style=color:#ff79c6>void</span><span style=color:#ff79c6>&gt;</span><span style=color:#ff79c6>this</span>.eventManager.addEventListener(
</span></span><span style=display:flex><span>               target, event, decoratePreventDefault(callback)) <span style=color:#ff79c6>as</span> () <span style=color:#ff79c6>=&gt;</span> <span style=color:#ff79c6>void</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>As you see, it&rsquo;s using a native way to add styles to the elements.</p><h2 id=native-way>Native way</h2><p>I see no reason to describe it using a very long and complicated description.
Just check the code bellow, it&rsquo;s easy to understand.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#ff79c6>import</span> {
</span></span><span style=display:flex><span>  ChangeDetectionStrategy,
</span></span><span style=display:flex><span>  Component,
</span></span><span style=display:flex><span>  ElementRef,
</span></span><span style=display:flex><span>  Input,
</span></span><span style=display:flex><span>  OnDestroy,
</span></span><span style=display:flex><span>  OnInit,
</span></span><span style=display:flex><span>  ViewChild
</span></span><span style=display:flex><span>} <span style=color:#ff79c6>from</span> <span style=color:#f1fa8c>&#39;@angular/core&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#ff79c6>import</span> {BackgroundService} <span style=color:#ff79c6>from</span> <span style=color:#f1fa8c>&#39;../background.service&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#ff79c6>import</span> {Subject} <span style=color:#ff79c6>from</span> <span style=color:#f1fa8c>&#34;rxjs&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#ff79c6>import</span> {takeUntil} <span style=color:#ff79c6>from</span> <span style=color:#f1fa8c>&#34;rxjs/operators&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>@Component</span>({
</span></span><span style=display:flex><span>  selector<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;app-list-item-native&#39;</span>,
</span></span><span style=display:flex><span>  template<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>`
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>    &lt;div #item&gt;Lorem ipsum dolor sit amet enim.&lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>  `</span>,
</span></span><span style=display:flex><span>  changeDetection: <span style=color:#8be9fd>ChangeDetectionStrategy.OnPush</span>
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#ff79c6>export</span> <span style=color:#ff79c6>class</span> ListItemNativeComponent <span style=color:#ff79c6>implements</span> OnInit, OnDestroy {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8be9fd;font-style:italic>@ViewChild</span>(<span style=color:#f1fa8c>&#39;item&#39;</span>, { <span style=color:#ff79c6>static</span><span style=color:#ff79c6>:</span> <span style=color:#ff79c6>true</span>, read: <span style=color:#8be9fd>ElementRef</span> })
</span></span><span style=display:flex><span>  item: <span style=color:#8be9fd>ElementRef</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8be9fd;font-style:italic>@Input</span>()
</span></span><span style=display:flex><span>  id: <span style=color:#8be9fd>number</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>private</span> <span style=color:#ff79c6>readonly</span> onDestroy$: <span style=color:#8be9fd>Subject</span>&lt;<span style=color:#ff79c6>void</span>&gt; <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>new</span> Subject&lt;<span style=color:#ff79c6>void</span>&gt;();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>constructor</span>(<span style=color:#ff79c6>private</span> backgroundService: <span style=color:#8be9fd>BackgroundService</span>) { }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  ngOnInit()<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>this</span>.backgroundService.<span style=color:#ff79c6>get</span>(<span style=color:#ff79c6>this</span>.id)
</span></span><span style=display:flex><span>      .pipe(takeUntil(<span style=color:#ff79c6>this</span>.onDestroy$))
</span></span><span style=display:flex><span>      .subscribe(color <span style=color:#ff79c6>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>this</span>.item.nativeElement.style.background <span style=color:#ff79c6>=</span> color;
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  ngOnDestroy() {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>this</span>.onDestroy$.next();
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>this</span>.onDestroy$.complete();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h2 id=test-app>Test app</h2><p>I described three ways of styling in the Angular framework. So which one is the best/most efficient? Unfortunately, it&rsquo;s not that simple.</p><p>To demonstrate that I created an app, you can download the sources from my GitHub <a href=https://github.com/galczo5/experiment-styles-performance>github.com/galczo5/experiment-styles-performance</a>.</p><p>For your convenience, I hosted it and placed an instance in the iframe bellow.</p><p>In the app I created three columns with the thousands of the elements. Each column is styled with a different method. You can click on three buttons.</p><p>First one is toggling the background style in all the elements in that column.</p><p>Second one is toggling the background style in half of the elements.</p><p>Last button is toggling the background style in only one element from the list.</p><p>Do the tests with the dev tools open. There are logs with a precise time measurement for each action.</p><div style="height:400px;width:1300px;border:1px solid #d3d3d3"><iframe style=border:0;width:100%;height:100% src=https://galczo5.github.io/experiment-styles-performance/></iframe></div><p>With my setup, I had results like in the table below.</p><table><thead><tr><th></th><th>Directive</th><th>Renderer2</th><th>Native</th></tr></thead><tbody><tr><td><strong>Change all</strong></td><td>277ms</td><td>5155ms</td><td>5485ms</td></tr><tr><td><strong>Change half</strong></td><td>164ms</td><td>2597ms</td><td>2835ms</td></tr><tr><td><strong>Change one</strong></td><td>54ms</td><td>11ms</td><td>11ms</td></tr></tbody></table><h2 id=conclusion>Conclusion</h2><p>There is no one the best way to add styles to the html elements.
It really depends on what you want to achieve.</p><p>Why changing the styles in one element is more efficient with the <code>Renderer2</code>&mldr;? It&rsquo;s easy. There is no overhead of framework checks etc.</p><p>Why changing the styles in multiple elements is faster with directives&mldr;? Well, in that approach we avoid multiple repaints and possible layout trashing problems.</p><p>We can generalize the rule to:</p><ul><li>When you want to change a lot of styles at the same moment, use build-in Angular directive/properties.</li><li>When you want to change only one style, it&rsquo;s better to use <code>Renderer2</code> service.</li></ul><p><img src=/images/renderer.png alt=docs></p></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/tags>Tags</a></li><li><a href=https://github.com/galczo5>GitHub</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#angular-build-in-directives>Angular build-in directives</a></li><li><a href=#renderer2>Renderer2</a></li><li><a href=#native-way>Native way</a></li><li><a href=#test-app>Test app</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fmythical-angular.dev%2fposts%2frenderer%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fmythical-angular.dev%2fposts%2frenderer%2f&text=Myth%3a%20Styling%20method%20doesn%27t%20matter" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fmythical-angular.dev%2fposts%2frenderer%2f&title=Myth%3a%20Styling%20method%20doesn%27t%20matter" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fmythical-angular.dev%2fposts%2frenderer%2f&is_video=false&description=Myth%3a%20Styling%20method%20doesn%27t%20matter" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Myth%3a%20Styling%20method%20doesn%27t%20matter&body=Check out this article: https%3a%2f%2fmythical-angular.dev%2fposts%2frenderer%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fmythical-angular.dev%2fposts%2frenderer%2f&title=Myth%3a%20Styling%20method%20doesn%27t%20matter" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fmythical-angular.dev%2fposts%2frenderer%2f&title=Myth%3a%20Styling%20method%20doesn%27t%20matter" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fmythical-angular.dev%2fposts%2frenderer%2f&name=Myth%3a%20Styling%20method%20doesn%27t%20matter&description=Today%20I%26rsquo%3bm%20going%20to%20show%20you%20how%20to%20test%20different%20methods%20of%20html%20styling%20in%20Angular.%20You%26rsquo%3bre%20going%20to%20learn%20what%20is%20Renderer2%2c%20how%20and%20when%20to%20it%20and%20of%20course%20how%20it%26rsquo%3bs%20implemented%20in%20the%20framework.%20I%26rsquo%3bm%20going%20to%20compare%20different%20approaches%20of%20adding%20styles%20to%20find%20the%20best%20one.%20You%26rsquo%3bll%20see%20that%20it%26rsquo%3bs%20not%20that%20simple.%0aAngular%20build-in%20directives%20At%20the%20very%20beginning%2c%20when%20you%20learn%20about%20Angular%20styling." aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fmythical-angular.dev%2fposts%2frenderer%2f&t=Myth%3a%20Styling%20method%20doesn%27t%20matter" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick='return $("#toc-footer").toggle(),!1' aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2022 Kamil Gałek</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/tags>Tags</a></li><li><a href=https://github.com/galczo5>GitHub</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script></html>