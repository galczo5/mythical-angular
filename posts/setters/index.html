<!doctype html><html lang=en-us>
<head>
<link rel=preload href=/mythical-angular/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/mythical-angular/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/mythical-angular/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/mythical-angular/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous>
<script type=text/javascript src=https://latest.cactus.chat/cactus.js></script>
<link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title> Myth: Using set instead ngOnChanges improves the performance | Mythical Angular</title>
<link rel=canonical href=https://galczo5.github.io/mythical-angular/posts/setters/>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=robots content="all,follow">
<meta name=googlebot content="index,follow,snippet,archive">
<meta property="og:title" content="Myth: Using set instead ngOnChanges improves the performance">
<meta property="og:description" content="Introduction Why using sets instead of ngOnChanges is considered as a good practice&mldr;? I&rsquo;m not sure, but I heard it so many times that I decided to check it. Thanks to luck, I found the root of this myth.
The myth It all started when I asked a frontend developer about practices that are helpful with dealing with the Angular performance problems. One of the things he said was that using sets on inputs is a performance tweak.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://galczo5.github.io/mythical-angular/posts/setters/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2022-02-06T00:00:00+00:00">
<meta property="article:modified_time" content="2022-02-06T00:00:00+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Myth: Using set instead ngOnChanges improves the performance">
<meta name=twitter:description content="Introduction Why using sets instead of ngOnChanges is considered as a good practice&mldr;? I&rsquo;m not sure, but I heard it so many times that I decided to check it. Thanks to luck, I found the root of this myth.
The myth It all started when I asked a frontend developer about practices that are helpful with dealing with the Angular performance problems. One of the things he said was that using sets on inputs is a performance tweak.">
<link rel=stylesheet href=https://galczo5.github.io/mythical-angular/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q==">
<link rel=stylesheet href=https://galczo5.github.io/mythical-angular/css/custom.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]-->
<link rel=icon type=image/png href=https://galczo5.github.io/mythical-angular/images/favicon.ico>
</head>
<body class="max-width mx-auto px3 ltr">
<div class="content index py4">
<div id=header-post>
<a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast')" style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu>
<span id=nav>
<ul>
<li><a href=/mythical-angular/>Home</a></li>
<li><a href=/mythical-angular/posts>All posts</a></li>
<li><a href=/mythical-angular/tags>Tags</a></li>
<li><a href=https://github.com/galczo5>GitHub</a></li>
</ul>
</span>
<br>
<span id=actions>
<ul>
<li>
<a class=icon href=https://galczo5.github.io/mythical-angular/posts/async-pipe/ aria-label=Previous>
<i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle()" onmouseout="$('#i-prev').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle()" onmouseout="$('#i-top').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# aria-label=Share>
<i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle()" onmouseout="$('#i-share').toggle()" onclick="return $('#share').toggle(),!1"></i>
</a>
</li>
</ul>
<span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span>
</span>
<br>
<div id=share style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fgalczo5.github.io%2fmythical-angular%2fposts%2fsetters%2f" aria-label=Facebook>
<i class="fab fa-facebook" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=https%3a%2f%2fgalczo5.github.io%2fmythical-angular%2fposts%2fsetters%2f&text=Myth%3a%20Using%20set%20instead%20ngOnChanges%20improves%20the%20performance" aria-label=Twitter>
<i class="fab fa-twitter" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fgalczo5.github.io%2fmythical-angular%2fposts%2fsetters%2f&title=Myth%3a%20Using%20set%20instead%20ngOnChanges%20improves%20the%20performance" aria-label=Linkedin>
<i class="fab fa-linkedin" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fgalczo5.github.io%2fmythical-angular%2fposts%2fsetters%2f&is_video=false&description=Myth%3a%20Using%20set%20instead%20ngOnChanges%20improves%20the%20performance" aria-label=Pinterest>
<i class="fab fa-pinterest" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=Myth%3a%20Using%20set%20instead%20ngOnChanges%20improves%20the%20performance&body=Check out this article: https%3a%2f%2fgalczo5.github.io%2fmythical-angular%2fposts%2fsetters%2f" aria-label=Email>
<i class="fas fa-envelope" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fgalczo5.github.io%2fmythical-angular%2fposts%2fsetters%2f&title=Myth%3a%20Using%20set%20instead%20ngOnChanges%20improves%20the%20performance" aria-label=Pocket>
<i class="fab fa-get-pocket" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fgalczo5.github.io%2fmythical-angular%2fposts%2fsetters%2f&title=Myth%3a%20Using%20set%20instead%20ngOnChanges%20improves%20the%20performance" aria-label=reddit>
<i class="fab fa-reddit" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fgalczo5.github.io%2fmythical-angular%2fposts%2fsetters%2f&name=Myth%3a%20Using%20set%20instead%20ngOnChanges%20improves%20the%20performance&description=Introduction%20Why%20using%20sets%20instead%20of%20ngOnChanges%20is%20considered%20as%20a%20good%20practice%26hellip%3b%3f%20I%26rsquo%3bm%20not%20sure%2c%20but%20I%20heard%20it%20so%20many%20times%20that%20I%20decided%20to%20check%20it.%20Thanks%20to%20luck%2c%20I%20found%20the%20root%20of%20this%20myth.%0aThe%20myth%20It%20all%20started%20when%20I%20asked%20a%20frontend%20developer%20about%20practices%20that%20are%20helpful%20with%20dealing%20with%20the%20Angular%20performance%20problems.%20One%20of%20the%20things%20he%20said%20was%20that%20using%20sets%20on%20inputs%20is%20a%20performance%20tweak." aria-label=Tumblr>
<i class="fab fa-tumblr" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fgalczo5.github.io%2fmythical-angular%2fposts%2fsetters%2f&t=Myth%3a%20Using%20set%20instead%20ngOnChanges%20improves%20the%20performance" aria-label="Hacker News">
<i class="fab fa-hacker-news" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div id=toc>
<nav id=TableOfContents>
<ul>
<li><a href=#introduction>Introduction</a></li>
<li><a href=#the-myth>The myth</a></li>
<li><a href=#verification>Verification</a></li>
<li><a href=#if-there-is-no-difference-why-not-setters>If there is no difference, why not setters</a></li>
<li><a href=#origin-of-the-myth>Origin of the myth</a></li>
<li><a href=#summary>Summary</a></li>
</ul>
</nav>
</div>
</span>
</div>
<article class=post itemscope itemtype=http://schema.org/BlogPosting>
<header>
<h1 class=posttitle itemprop="name headline">
Myth: Using set instead ngOnChanges improves the performance
</h1>
<div class=meta>
<div class=postdate>
<time datetime="2022-02-06 00:00:00 +0000 UTC" itemprop=datePublished>2022-02-06</time>
</div>
</div>
</header>
<div class=content itemprop=articleBody>
<h2 id=introduction>Introduction</h2>
<p>Why using sets instead of <code>ngOnChanges</code> is considered as a good practice&mldr;?
I&rsquo;m not sure, but I heard it so many times that I decided to check it.
Thanks to luck, I found the root of this myth.</p>
<h2 id=the-myth>The myth</h2>
<p>It all started
when I asked a frontend developer about practices
that are helpful with dealing with the Angular performance problems.
One of the things he said was that using sets on inputs is a performance tweak.
After that conversation, few other developers said the same.
So, myth I&rsquo;m going to verify is &ldquo;Sets are faster than ngOnChanges&rdquo;.</p>
<h2 id=verification>Verification</h2>
<p>To verify this case, I created a GitHub repo. <a href=https://github.com/galczo5/experiment-setters>Here it is.</a>
The App contains those routes, one with a component using setter on input.</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#ff79c6>import</span> { ChangeDetectionStrategy, Component, Input } <span style=color:#ff79c6>from</span> <span style=color:#f1fa8c>&#39;@angular/core&#39;</span>;

<span style=color:#8be9fd;font-style:italic>@Component</span>({
  selector<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;app-setter-counter&#39;</span>,
  template<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;&lt;p&gt;{{ displayValue }}&lt;/p&gt;&#39;</span>,
  changeDetection: <span style=color:#8be9fd>ChangeDetectionStrategy.OnPush</span>
})
<span style=color:#ff79c6>export</span> <span style=color:#ff79c6>class</span> SetterCounterComponent {

  <span style=color:#8be9fd;font-style:italic>@Input</span>()
  <span style=color:#ff79c6>set</span> value(newValue: <span style=color:#8be9fd>number</span>) {
    <span style=color:#ff79c6>this</span>.displayValue <span style=color:#ff79c6>=</span> newValue
  }

  displayValue: <span style=color:#8be9fd>number</span> <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span>; 

}
</code></pre></td></tr></table>
</div>
</div><p>The second component is almost the same, only change is that it&rsquo;s using <code>ngOnChanges</code> method to set <code>displayValue</code>.</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#ff79c6>import</span> { ChangeDetectionStrategy, Component, Input, OnChanges, SimpleChanges } <span style=color:#ff79c6>from</span> <span style=color:#f1fa8c>&#39;@angular/core&#39;</span>;

<span style=color:#8be9fd;font-style:italic>@Component</span>({
    selector<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;app-on-changes-counter&#39;</span>,
    template<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;&lt;p&gt;{{ displayValue }}&lt;/p&gt;&#39;</span>,
    changeDetection: <span style=color:#8be9fd>ChangeDetectionStrategy.OnPush</span>
})
<span style=color:#ff79c6>export</span> <span style=color:#ff79c6>class</span> OnChangesCounterComponent <span style=color:#ff79c6>implements</span> OnChanges {

    <span style=color:#8be9fd;font-style:italic>@Input</span>()
    value: <span style=color:#8be9fd>number</span> <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span>;

    displayValue: <span style=color:#8be9fd>number</span> <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span>;

    ngOnChanges(changes: <span style=color:#8be9fd>SimpleChanges</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span> {
        <span style=color:#ff79c6>if</span> (changes.value) {
            <span style=color:#ff79c6>this</span>.displayValue <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>this</span>.value;
        }
    }
}
</code></pre></td></tr></table>
</div>
</div><p>Every component in the whole app is using <code>ChangeDetectionStrategy.OnPush</code> strategy.
What&rsquo;s more I decided to provide <code>noop</code> zone to minimize the overhead of the framework.</p>
<p>Each test changes the input 100 000 times and triggers the change detection between each change.</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#ff79c6>import</span> { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnChanges, OnInit, SimpleChanges } <span style=color:#ff79c6>from</span> <span style=color:#f1fa8c>&#39;@angular/core&#39;</span>;

<span style=color:#8be9fd;font-style:italic>@Component</span>({
  selector<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;app-on-changes&#39;</span>,
  template<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>`
</span><span style=color:#f1fa8c>    &lt;button (click)=&#34;click()&#34;&gt;on changes test&lt;/button&gt;
</span><span style=color:#f1fa8c>    &lt;p&gt;Time: {{time}}&lt;/p&gt;
</span><span style=color:#f1fa8c>    &lt;app-on-changes-counter [value]=&#34;value&#34;&gt;&lt;/app-on-changes-counter&gt;
</span><span style=color:#f1fa8c>  `</span>,
  changeDetection: <span style=color:#8be9fd>ChangeDetectionStrategy.OnPush</span>
})
<span style=color:#ff79c6>export</span> <span style=color:#ff79c6>class</span> OnChangesComponent {

  value: <span style=color:#8be9fd>number</span> <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span>;
  time: <span style=color:#8be9fd>number</span> <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span>;

  <span style=color:#ff79c6>constructor</span>(<span style=color:#ff79c6>private</span> cdr: <span style=color:#8be9fd>ChangeDetectorRef</span>) {}

  click()<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>void</span> {
    <span style=color:#ff79c6>this</span>.value <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span>;

    <span style=color:#ff79c6>const</span> start <span style=color:#ff79c6>=</span> performance.now();
    <span style=color:#ff79c6>for</span> (<span style=color:#8be9fd;font-style:italic>let</span> i <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span>; i <span style=color:#ff79c6>&lt;</span> <span style=color:#bd93f9>100</span>_000; i<span style=color:#ff79c6>++</span>) {
      <span style=color:#ff79c6>this</span>.value <span style=color:#ff79c6>=</span> i;
      <span style=color:#ff79c6>this</span>.cdr.detectChanges();
    }

    <span style=color:#ff79c6>this</span>.time <span style=color:#ff79c6>=</span> performance.now() <span style=color:#ff79c6>-</span> start;
    <span style=color:#ff79c6>this</span>.cdr.detectChanges();
  }

}
</code></pre></td></tr></table>
</div>
</div><p>To have trustful results, I repeated the test 10 times.
You can try it at home, but if you want, below I presented my results.</p>
<table>
<thead>
<tr>
<th>No</th>
<th>OnChanges</th>
<th>Setter</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>395 ms</td>
<td>474 ms</td>
</tr>
<tr>
<td>2</td>
<td>464 ms</td>
<td>348 ms</td>
</tr>
<tr>
<td>3</td>
<td>424 ms</td>
<td>371 ms</td>
</tr>
<tr>
<td>4</td>
<td>444 ms</td>
<td>393 ms</td>
</tr>
<tr>
<td>5</td>
<td>387 ms</td>
<td>425 ms</td>
</tr>
<tr>
<td>6</td>
<td>445 ms</td>
<td>346 ms</td>
</tr>
<tr>
<td>7</td>
<td>430 ms</td>
<td>374 ms</td>
</tr>
<tr>
<td>8</td>
<td>413 ms</td>
<td>359 ms</td>
</tr>
<tr>
<td>9</td>
<td>409 ms</td>
<td>411 ms</td>
</tr>
<tr>
<td>10</td>
<td>429 ms</td>
<td>356 ms</td>
</tr>
<tr>
<td>&mdash;</td>
<td>&mdash;&mdash;&mdash;</td>
<td>&mdash;&mdash;</td>
</tr>
<tr>
<td>MAX</td>
<td>464 ms</td>
<td>474 ms</td>
</tr>
<tr>
<td>MIN</td>
<td>387 ms</td>
<td>346 ms</td>
</tr>
<tr>
<td>AVG</td>
<td>424 ms</td>
<td>385 ms</td>
</tr>
<tr>
<td>MED</td>
<td>426.5 ms</td>
<td>372.5 ms</td>
</tr>
</tbody>
</table>
<p>As you see, the difference between the results is minimal and may be caused by the environmental conditions.
It&rsquo;s slightly better for setters but if we compare minimum and maximum values, we can agree that there is no difference.</p>
<h2 id=if-there-is-no-difference-why-not-setters>If there is no difference, why not setters</h2>
<p>Using setters has a huge con. To demonstrate it, I&rsquo;m using these two code snippets.
First, we have a Component with two inputs.
The second input is using value from the first input.
Very simple code, right?</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#ff79c6>import</span> { Component, Input } <span style=color:#ff79c6>from</span> <span style=color:#f1fa8c>&#39;@angular/core&#39;</span>;

<span style=color:#8be9fd;font-style:italic>@Component</span>({
  selector<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;app-root&#39;</span>,
  template<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>`
</span><span style=color:#f1fa8c>    {{ _normalizedFullName }}
</span><span style=color:#f1fa8c>  `</span>
})
<span style=color:#ff79c6>export</span> <span style=color:#ff79c6>class</span> AppComponent {

  <span style=color:#8be9fd;font-style:italic>@Input</span>()
  <span style=color:#ff79c6>set</span> name(value: <span style=color:#8be9fd>string</span>) {
    <span style=color:#ff79c6>this</span>._name <span style=color:#ff79c6>=</span> value;
  }

  <span style=color:#8be9fd;font-style:italic>@Input</span>()
  <span style=color:#ff79c6>set</span> surname(value: <span style=color:#8be9fd>string</span>) {
    <span style=color:#ff79c6>this</span>._surname <span style=color:#ff79c6>=</span> value;
    <span style=color:#ff79c6>this</span>._normalizedFullName <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>`</span><span style=color:#f1fa8c>${</span><span style=color:#ff79c6>this</span>._name.toLocaleUpperCase()<span style=color:#f1fa8c>}</span><span style=color:#f1fa8c> </span><span style=color:#f1fa8c>${</span><span style=color:#ff79c6>this</span>._surname.toLocaleUpperCase()<span style=color:#f1fa8c>}</span><span style=color:#f1fa8c>`</span>
  }

  _name: <span style=color:#8be9fd>string</span>;
  _surname: <span style=color:#8be9fd>string</span>;
  _normalizedFullName: <span style=color:#8be9fd>string</span>;

}
</code></pre></td></tr></table>
</div>
</div><p>The problem occurs when you use the component.
You have to consider the order of executing sets in the class.
It&rsquo;s not going to be executed at the same moment, one set has to be second.</p>
<p>So, if you use this component as in example below, you get an error.</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=color:#6272a4>&lt;!-- This one is ok --&gt;</span>
&lt;<span style=color:#ff79c6>app-root</span> <span style=color:#50fa7b>name</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;John&#34;</span> <span style=color:#50fa7b>surname</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;Doe&#34;</span>&gt;&lt;/<span style=color:#ff79c6>app-root</span>&gt;

<span style=color:#6272a4>&lt;!-- This one is not ok --&gt;</span>
&lt;<span style=color:#ff79c6>app-root</span> <span style=color:#50fa7b>surname</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;Doe&#34;</span> <span style=color:#50fa7b>name</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;John&#34;</span>&gt;&lt;/<span style=color:#ff79c6>app-root</span>&gt;
</code></pre></td></tr></table>
</div>
</div><p>As you may notice, the order of sets is directed by order in a component usage.
It means that a programmer who is going to use your component has to know its implementation.
This one is very simple, in real-life applications it&rsquo;s very often a lot harder to find where the problem is.
The last thing you want to have is these kinds of problems in your code base.</p>
<p>If you ask me for advice, just don&rsquo;t use setters. Use <code>ngOnChanges</code> instead.</p>
<h2 id=origin-of-the-myth>Origin of the myth</h2>
<p>Once I asked person who told me again about that performance tip with setters.
I had that luck, to get the source of the myth.
It was this page: <a href=https://nofluffjobs.com/blog/angular-developer-pytania/>nofluffjobs.com/blog/angular-developer-pytania</a>.
It&rsquo;s in Polish, but I translated it for you.</p>
<ul>
<li>OnPush strategy</li>
<li>Detaching from Angular Zone</li>
<li>Using ChangeDetector for manual handling change detection</li>
<li>Using @Input instead OnChanges</li>
<li>View lazy loading</li>
</ul>
<p>Sources:</p>
<p><a href=https://github.com/mgechev/angular-performance-checklist>https://github.com/mgechev/angular-performance-checklist</a>
<a href=http://www.angular.love/2017/01/15/angular-2-change-detector-mechanizmy-detekcji-oraz-strategia-onpush/>http://www.angular.love/2017/01/15/angular-2-change-detector-mechanizmy-detekcji-oraz-strategia-onpush/</a>
<a href=http://www.angular.love/2018/03/04/angular-i-zone-js/>http://www.angular.love/2018/03/04/angular-i-zone-js/</a></p>
<p>It leads us to a very well-known
<a href=https://github.com/mgechev/angular-performance-checklist>mgechev/angular-performance-checklist</a> repository.</p>
<p>What is interesting, there is a fragment that shows how to use setters to get better performance.
<a href=https://github.com/mgechev/angular-performance-checklist#detaching-the-change-detector>Detaching the Change Detector</a> shows us a way
how to use native JavaScript to rerender only a part of the page.
This is the clue of that tip.</p>
<p>If you want to change a css class or a style of an html element, use renderer or native solutions.
It&rsquo;s probably faster thant running the whole rerender of view.
But please don&rsquo;t treat it as a rule.
Sometimes it&rsquo;s better to refresh the whole view.
I&rsquo;m going to explain it in the future in another post.</p>
<h2 id=summary>Summary</h2>
<p>There is no performance reason to use setters instead of using <code>ngOnChanges</code>.
What&rsquo;s more, you can create new, hard to find errors if you create a component with inputs depending on each other.</p>
</div>
</article>
<div id=footer-post-container>
<div id=footer-post>
<div id=nav-footer style=display:none>
<ul>
<li><a href=/mythical-angular/>Home</a></li>
<li><a href=/mythical-angular/posts>All posts</a></li>
<li><a href=/mythical-angular/tags>Tags</a></li>
<li><a href=https://github.com/galczo5>GitHub</a></li>
</ul>
</div>
<div id=toc-footer style=display:none>
<nav id=TableOfContents>
<ul>
<li><a href=#introduction>Introduction</a></li>
<li><a href=#the-myth>The myth</a></li>
<li><a href=#verification>Verification</a></li>
<li><a href=#if-there-is-no-difference-why-not-setters>If there is no difference, why not setters</a></li>
<li><a href=#origin-of-the-myth>Origin of the myth</a></li>
<li><a href=#summary>Summary</a></li>
</ul>
</nav>
</div>
<div id=share-footer style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fgalczo5.github.io%2fmythical-angular%2fposts%2fsetters%2f" aria-label=Facebook>
<i class="fab fa-facebook fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=https%3a%2f%2fgalczo5.github.io%2fmythical-angular%2fposts%2fsetters%2f&text=Myth%3a%20Using%20set%20instead%20ngOnChanges%20improves%20the%20performance" aria-label=Twitter>
<i class="fab fa-twitter fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fgalczo5.github.io%2fmythical-angular%2fposts%2fsetters%2f&title=Myth%3a%20Using%20set%20instead%20ngOnChanges%20improves%20the%20performance" aria-label=Linkedin>
<i class="fab fa-linkedin fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fgalczo5.github.io%2fmythical-angular%2fposts%2fsetters%2f&is_video=false&description=Myth%3a%20Using%20set%20instead%20ngOnChanges%20improves%20the%20performance" aria-label=Pinterest>
<i class="fab fa-pinterest fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=Myth%3a%20Using%20set%20instead%20ngOnChanges%20improves%20the%20performance&body=Check out this article: https%3a%2f%2fgalczo5.github.io%2fmythical-angular%2fposts%2fsetters%2f" aria-label=Email>
<i class="fas fa-envelope fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fgalczo5.github.io%2fmythical-angular%2fposts%2fsetters%2f&title=Myth%3a%20Using%20set%20instead%20ngOnChanges%20improves%20the%20performance" aria-label=Pocket>
<i class="fab fa-get-pocket fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fgalczo5.github.io%2fmythical-angular%2fposts%2fsetters%2f&title=Myth%3a%20Using%20set%20instead%20ngOnChanges%20improves%20the%20performance" aria-label=reddit>
<i class="fab fa-reddit fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fgalczo5.github.io%2fmythical-angular%2fposts%2fsetters%2f&name=Myth%3a%20Using%20set%20instead%20ngOnChanges%20improves%20the%20performance&description=Introduction%20Why%20using%20sets%20instead%20of%20ngOnChanges%20is%20considered%20as%20a%20good%20practice%26hellip%3b%3f%20I%26rsquo%3bm%20not%20sure%2c%20but%20I%20heard%20it%20so%20many%20times%20that%20I%20decided%20to%20check%20it.%20Thanks%20to%20luck%2c%20I%20found%20the%20root%20of%20this%20myth.%0aThe%20myth%20It%20all%20started%20when%20I%20asked%20a%20frontend%20developer%20about%20practices%20that%20are%20helpful%20with%20dealing%20with%20the%20Angular%20performance%20problems.%20One%20of%20the%20things%20he%20said%20was%20that%20using%20sets%20on%20inputs%20is%20a%20performance%20tweak." aria-label=Tumblr>
<i class="fab fa-tumblr fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fgalczo5.github.io%2fmythical-angular%2fposts%2fsetters%2f&t=Myth%3a%20Using%20set%20instead%20ngOnChanges%20improves%20the%20performance" aria-label="Hacker News">
<i class="fab fa-hacker-news fa-lg" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div id=actions-footer>
<a id=menu-toggle class=icon href=# onclick="return $('#nav-footer').toggle(),!1" aria-label=Menu>
<i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick="return $('#toc-footer').toggle(),!1" aria-label=TOC>
<i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick="return $('#share-footer').toggle(),!1" aria-label=Share>
<i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a>
</div>
</div>
</div>
<footer id=footer>
<div class=footer-left>
Copyright &copy; 2022 Kamil Gałek
</div>
<div class=footer-right>
<nav>
<ul>
<li><a href=/mythical-angular/>Home</a></li>
<li><a href=/mythical-angular/posts>All posts</a></li>
<li><a href=/mythical-angular/tags>Tags</a></li>
<li><a href=https://github.com/galczo5>GitHub</a></li>
</ul>
</nav>
</div>
</footer>
</div>
</body>
<link rel=stylesheet href=/mythical-angular/lib/font-awesome/css/all.min.css>
<script src=/mythical-angular/lib/jquery/jquery.min.js></script>
<script src=/mythical-angular/js/main.js></script>
<script src=/mythical-angular/js/code-copy.js></script>
</html>